////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//  Copyright (C) 2008 Quantron Systems LLC.
//  All Rights Reserved.
//
//  This file is part of the Private project.
//  For conditions of distribution and use,
//  please contact sales@quantron-systems.com
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

import _ from 'lodash';

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const getVersionAsInteger = (version: number | Date): number => (_.isDate(version) ? version.getTime() : version);

// Manually increment existing doc version number by 1 (if not null) to enable ES to perform deletion of the
// versioned document (since we don't get a fullDocument from Mongo for 'delete' change events)
const incrementVersionForDeletion = (version?: number): number | null =>
    (version && Number.isInteger(version) ? version + 1 : null);

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
export {getVersionAsInteger, incrementVersionForDeletion};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
